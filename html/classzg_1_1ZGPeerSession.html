<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>ZG: ZGPeerSession Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ZG
   &#160;<span id="projectnumber">&quot;1.00</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacezg.html">zg</a></li><li class="navelem"><a class="el" href="classzg_1_1ZGPeerSession.html">ZGPeerSession</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classzg_1_1ZGPeerSession-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ZGPeerSession Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>This is the class that a user program would typically subclass from and add to a ReflectServer in order to participate in a ZG system.  
 <a href="classzg_1_1ZGPeerSession.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ZGPeerSession:</div>
<div class="dyncontent">
<div class="center"><img src="classzg_1_1ZGPeerSession__inherit__graph.png" border="0" usemap="#ZGPeerSession_inherit__map" alt="Inheritance graph"/></div>
<map name="ZGPeerSession_inherit__map" id="ZGPeerSession_inherit__map">
<area shape="rect" id="node6" href="classzg_1_1ZGDatabasePeerSession.html" title="This is a convenience class; it is the same as a ZGPeerSession except that it also knows how to creat..." alt="" coords="424,81,597,108"/><area shape="rect" id="node3" href="classzg_1_1ITextCommandReceiver.html" title="Interface for an object that can receive text commands from the user. " alt="" coords="25,56,191,83"/><area shape="rect" id="node5" href="classzg_1_1INetworkTimeProvider.html" title="This is an abstract interface for an object that can provide us with network&#45;clock&#45;time values..." alt="" coords="31,157,185,184"/><area shape="rect" id="node7" href="classchoir_1_1ChoirSession.html" title="This is the class that that the Choir demo uses to implement its data&#45;replication functionality..." alt="" coords="645,81,747,108"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a68af5b56013ccac02ac9a9e97d4cae95"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a68af5b56013ccac02ac9a9e97d4cae95">ZGPeerSession</a> (const <a class="el" href="classzg_1_1ZGPeerSettings.html">ZGPeerSettings</a> &amp;peerSettings)</td></tr>
<tr class="memdesc:a68af5b56013ccac02ac9a9e97d4cae95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a68af5b56013ccac02ac9a9e97d4cae95">More...</a><br /></td></tr>
<tr class="separator:a68af5b56013ccac02ac9a9e97d4cae95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd034f5c7d067f473fe2f8df182e4f91"><td class="memItemLeft" align="right" valign="top">virtual status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#acd034f5c7d067f473fe2f8df182e4f91">AttachedToServer</a> ()</td></tr>
<tr class="memdesc:acd034f5c7d067f473fe2f8df182e4f91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when this session object is attached to the ReflectServer object.  <a href="#acd034f5c7d067f473fe2f8df182e4f91">More...</a><br /></td></tr>
<tr class="separator:acd034f5c7d067f473fe2f8df182e4f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03a3d3aa94ede5f54ba5c68ca0397f2a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a03a3d3aa94ede5f54ba5c68ca0397f2a">AboutToDetachFromServer</a> ()</td></tr>
<tr class="memdesc:a03a3d3aa94ede5f54ba5c68ca0397f2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called just before this session object is detached from the ReflectServer object.  <a href="#a03a3d3aa94ede5f54ba5c68ca0397f2a">More...</a><br /></td></tr>
<tr class="separator:a03a3d3aa94ede5f54ba5c68ca0397f2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70cf9ddd7b1758561710af7c7ebc3411"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a70cf9ddd7b1758561710af7c7ebc3411">EndSession</a> ()</td></tr>
<tr class="memdesc:a70cf9ddd7b1758561710af7c7ebc3411"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this to request the termination of this session and its detachment from the ReflectServer.  <a href="#a70cf9ddd7b1758561710af7c7ebc3411">More...</a><br /></td></tr>
<tr class="separator:a70cf9ddd7b1758561710af7c7ebc3411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb739573da69c2b540c9a921d732a149"><td class="memItemLeft" align="right" valign="top">virtual uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#afb739573da69c2b540c9a921d732a149">GetPulseTime</a> (const PulseArgs &amp;args)</td></tr>
<tr class="memdesc:afb739573da69c2b540c9a921d732a149"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the time (in microseconds, using the timebase of GetRunTime64()) when <a class="el" href="classzg_1_1ZGPeerSession.html#ac530185533f417b7c6c86032c82b6a0d" title="Called at (approximately) the time specified by GetPulseTime(). ">Pulse()</a> should next be called.  <a href="#afb739573da69c2b540c9a921d732a149">More...</a><br /></td></tr>
<tr class="separator:afb739573da69c2b540c9a921d732a149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac530185533f417b7c6c86032c82b6a0d"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ac530185533f417b7c6c86032c82b6a0d">Pulse</a> (const PulseArgs &amp;args)</td></tr>
<tr class="memdesc:ac530185533f417b7c6c86032c82b6a0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called at (approximately) the time specified by <a class="el" href="classzg_1_1ZGPeerSession.html#afb739573da69c2b540c9a921d732a149" title="Returns the time (in microseconds, using the timebase of GetRunTime64()) when Pulse() should next be ...">GetPulseTime()</a>.  <a href="#ac530185533f417b7c6c86032c82b6a0d">More...</a><br /></td></tr>
<tr class="separator:ac530185533f417b7c6c86032c82b6a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af091c3cd023f62173ddd143e81abe17d"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#af091c3cd023f62173ddd143e81abe17d">IsReadyForTextCommands</a> () const </td></tr>
<tr class="memdesc:af091c3cd023f62173ddd143e81abe17d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default implementation returns true iff we are currently fully attached to the ZG system.  <a href="#af091c3cd023f62173ddd143e81abe17d">More...</a><br /></td></tr>
<tr class="separator:af091c3cd023f62173ddd143e81abe17d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607f895c8d8c8a4d7a9fa04407e7d9b6"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a607f895c8d8c8a4d7a9fa04407e7d9b6">TextCommandReceived</a> (const String &amp;text)</td></tr>
<tr class="memdesc:a607f895c8d8c8a4d7a9fa04407e7d9b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default implementation handles some standard ZG commands such as "print peers" or "print sessions".  <a href="#a607f895c8d8c8a4d7a9fa04407e7d9b6">More...</a><br /></td></tr>
<tr class="separator:a607f895c8d8c8a4d7a9fa04407e7d9b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24588d280336a3e8193b3316791f38dc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a24588d280336a3e8193b3316791f38dc">IAmTheSeniorPeer</a> () const </td></tr>
<tr class="memdesc:a24588d280336a3e8193b3316791f38dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true iff this peer is currently considered to be the senior peer of the system.  <a href="#a24588d280336a3e8193b3316791f38dc">More...</a><br /></td></tr>
<tr class="separator:a24588d280336a3e8193b3316791f38dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f46531d864b83befde9c9237b4628d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classzg_1_1ZGPeerSettings.html">ZGPeerSettings</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a00f46531d864b83befde9c9237b4628d">GetPeerSettings</a> () const </td></tr>
<tr class="memdesc:a00f46531d864b83befde9c9237b4628d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="classzg_1_1ZGPeerSettings.html" title="This immutable class holds various read-only settings that will be used to define the peer&#39;s behavior...">ZGPeerSettings</a> object, as passed to our constructor.  <a href="#a00f46531d864b83befde9c9237b4628d">More...</a><br /></td></tr>
<tr class="separator:a00f46531d864b83befde9c9237b4628d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3f7e5a94030c65a6fd3d9be700f898"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a1f3f7e5a94030c65a6fd3d9be700f898">NetworkInterfacesChanged</a> (const Hashtable&lt; String, Void &gt; &amp;optInterfaceNames)</td></tr>
<tr class="memdesc:a1f3f7e5a94030c65a6fd3d9be700f898"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the set of available network interfaces on this computer has changed.  <a href="#a1f3f7e5a94030c65a6fd3d9be700f898">More...</a><br /></td></tr>
<tr class="separator:a1f3f7e5a94030c65a6fd3d9be700f898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c6727307a52f5b06d67b4a644fd570b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a2c6727307a52f5b06d67b4a644fd570b">ComputerIsAboutToSleep</a> ()</td></tr>
<tr class="memdesc:a2c6727307a52f5b06d67b4a644fd570b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called just before this computer goes to sleep (e.g.  <a href="#a2c6727307a52f5b06d67b4a644fd570b">More...</a><br /></td></tr>
<tr class="separator:a2c6727307a52f5b06d67b4a644fd570b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca77828cd3f199719a9763cfcc8df356"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#aca77828cd3f199719a9763cfcc8df356">ComputerJustWokeUp</a> ()</td></tr>
<tr class="memdesc:aca77828cd3f199719a9763cfcc8df356"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called just after this computer woke up from sleep (e.g.  <a href="#aca77828cd3f199719a9763cfcc8df356">More...</a><br /></td></tr>
<tr class="separator:aca77828cd3f199719a9763cfcc8df356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ded747bc909df4745d470f24893ab7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ac2ded747bc909df4745d470f24893ab7">IAmFullyAttached</a> () const </td></tr>
<tr class="memdesc:ac2ded747bc909df4745d470f24893ab7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true iff this peer is fully attached to the system (i.e.  <a href="#ac2ded747bc909df4745d470f24893ab7">More...</a><br /></td></tr>
<tr class="separator:ac2ded747bc909df4745d470f24893ab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a259963b0914bd8676f2045471685cd0d"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a259963b0914bd8676f2045471685cd0d">LocalSeniorPeerStatusChanged</a> ()</td></tr>
<tr class="memdesc:a259963b0914bd8676f2045471685cd0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever this peer has gained or lost senior-peer status (current status is indicated by the return value of <a class="el" href="classzg_1_1ZGPeerSession.html#a24588d280336a3e8193b3316791f38dc" title="Returns true iff this peer is currently considered to be the senior peer of the system. ">IAmTheSeniorPeer()</a>)  <a href="#a259963b0914bd8676f2045471685cd0d">More...</a><br /></td></tr>
<tr class="separator:a259963b0914bd8676f2045471685cd0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a324b106fa339ebe6bc79f3323bd4a02e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a324b106fa339ebe6bc79f3323bd4a02e">GetLocalPeerID</a> () const </td></tr>
<tr class="memdesc:a324b106fa339ebe6bc79f3323bd4a02e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="classzg_1_1ZGPeerID.html" title="A ZGPeerID is a 128-bit integer that uniquely represents a particular peer in a ZG system...">ZGPeerID</a> being used by this local peer.  <a href="#a324b106fa339ebe6bc79f3323bd4a02e">More...</a><br /></td></tr>
<tr class="separator:a324b106fa339ebe6bc79f3323bd4a02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab298b1b3f66749ab5b4b961e18e1214a"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ab298b1b3f66749ab5b4b961e18e1214a">GetSeniorPeerID</a> () const </td></tr>
<tr class="memdesc:ab298b1b3f66749ab5b4b961e18e1214a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="classzg_1_1ZGPeerID.html" title="A ZGPeerID is a 128-bit integer that uniquely represents a particular peer in a ZG system...">ZGPeerID</a> of the senior peer of this system, or an invalid <a class="el" href="classzg_1_1ZGPeerID.html" title="A ZGPeerID is a 128-bit integer that uniquely represents a particular peer in a ZG system...">ZGPeerID</a> if there currently is no senior peer (that we know of).  <a href="#ab298b1b3f66749ab5b4b961e18e1214a">More...</a><br /></td></tr>
<tr class="separator:ab298b1b3f66749ab5b4b961e18e1214a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b2928662fb1e137125cfe2bce596811"><td class="memItemLeft" align="right" valign="top">virtual uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a7b2928662fb1e137125cfe2bce596811">GetNetworkTime64</a> () const </td></tr>
<tr class="memdesc:a7b2928662fb1e137125cfe2bce596811"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current time according to the network-time-clock, in microseconds.  <a href="#a7b2928662fb1e137125cfe2bce596811">More...</a><br /></td></tr>
<tr class="separator:a7b2928662fb1e137125cfe2bce596811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eebb6c3eabb3eb64776560cbbf9c17c"><td class="memItemLeft" align="right" valign="top">virtual uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a4eebb6c3eabb3eb64776560cbbf9c17c">GetRunTime64ForNetworkTime64</a> (uint64 networkTime64TimeStamp) const </td></tr>
<tr class="memdesc:a4eebb6c3eabb3eb64776560cbbf9c17c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a network-time-clock-value (i.e.  <a href="#a4eebb6c3eabb3eb64776560cbbf9c17c">More...</a><br /></td></tr>
<tr class="separator:a4eebb6c3eabb3eb64776560cbbf9c17c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e8115d83d03d665bb0bdb5291f53df6"><td class="memItemLeft" align="right" valign="top">virtual uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a3e8115d83d03d665bb0bdb5291f53df6">GetNetworkTime64ForRunTime64</a> (uint64 runTime64TimeStamp) const </td></tr>
<tr class="memdesc:a3e8115d83d03d665bb0bdb5291f53df6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a local-time-clock-value (i.e.  <a href="#a3e8115d83d03d665bb0bdb5291f53df6">More...</a><br /></td></tr>
<tr class="separator:a3e8115d83d03d665bb0bdb5291f53df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae895c38d03054e633a4d7556e15cc53a"><td class="memItemLeft" align="right" valign="top">virtual int64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ae895c38d03054e633a4d7556e15cc53a">GetToNetworkTimeOffset</a> () const </td></tr>
<tr class="memdesc:ae895c38d03054e633a4d7556e15cc53a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of microseconds that should be added to a GetRunTime64() value to turn it into a <a class="el" href="classzg_1_1ZGPeerSession.html#a7b2928662fb1e137125cfe2bce596811" title="Returns the current time according to the network-time-clock, in microseconds. ">GetNetworkTime64()</a> value, or subtracted to do the inverse operation.  <a href="#ae895c38d03054e633a4d7556e15cc53a">More...</a><br /></td></tr>
<tr class="separator:ae895c38d03054e633a4d7556e15cc53a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab73bdc55c3698194832c58b7c438eae2"><td class="memItemLeft" align="right" valign="top">const Hashtable&lt; <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a>, <br class="typebreak" />
ConstMessageRef &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ab73bdc55c3698194832c58b7c438eae2">GetOnlinePeers</a> () const </td></tr>
<tr class="memdesc:ab73bdc55c3698194832c58b7c438eae2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a reference to a read-only table of the peers that are currently online in the system.  <a href="#ab73bdc55c3698194832c58b7c438eae2">More...</a><br /></td></tr>
<tr class="separator:ab73bdc55c3698194832c58b7c438eae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62ec85a1c44164be49d34f312fc0d2e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#aa62ec85a1c44164be49d34f312fc0d2e">IsPeerOnline</a> (const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;peerID) const </td></tr>
<tr class="memdesc:aa62ec85a1c44164be49d34f312fc0d2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true iff if the specified peer is currently online.  <a href="#aa62ec85a1c44164be49d34f312fc0d2e">More...</a><br /></td></tr>
<tr class="separator:aa62ec85a1c44164be49d34f312fc0d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab19b7f43ff70e253eae40aec3d72ed82"><td class="memItemLeft" align="right" valign="top">uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ab19b7f43ff70e253eae40aec3d72ed82">GetEstimatedLatencyToPeer</a> (const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;peerID) const </td></tr>
<tr class="memdesc:ab19b7f43ff70e253eae40aec3d72ed82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets our current estimate of the one-way network latency between us and the specified peer.  <a href="#ab19b7f43ff70e253eae40aec3d72ed82">More...</a><br /></td></tr>
<tr class="separator:ab19b7f43ff70e253eae40aec3d72ed82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a9b5d5614eb3a7655c48bb62e52f76cf0"><td class="memItemLeft" align="right" valign="top">status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a9b5d5614eb3a7655c48bb62e52f76cf0">RequestResetDatabaseStateToDefault</a> (uint32 whichDatabase)</td></tr>
<tr class="memdesc:a9b5d5614eb3a7655c48bb62e52f76cf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this if you want to request that the specified database be reset back to its well-known default state.  <a href="#a9b5d5614eb3a7655c48bb62e52f76cf0">More...</a><br /></td></tr>
<tr class="separator:a9b5d5614eb3a7655c48bb62e52f76cf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2b52502bde42f465521343a52db6eb6"><td class="memItemLeft" align="right" valign="top">status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ae2b52502bde42f465521343a52db6eb6">RequestReplaceDatabaseState</a> (uint32 whichDatabase, const MessageRef &amp;newDatabaseStateMsg)</td></tr>
<tr class="memdesc:ae2b52502bde42f465521343a52db6eb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this if you want to request that the specified database be completely replaced with a new state that is specified by the passed-in Message.  <a href="#ae2b52502bde42f465521343a52db6eb6">More...</a><br /></td></tr>
<tr class="separator:ae2b52502bde42f465521343a52db6eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad05ba8226d0996574056d5028c3973f9"><td class="memItemLeft" align="right" valign="top">status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ad05ba8226d0996574056d5028c3973f9">RequestUpdateDatabaseState</a> (uint32 whichDatabase, const MessageRef &amp;databaseUpdateMsg)</td></tr>
<tr class="memdesc:ad05ba8226d0996574056d5028c3973f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this if you want to request that the specified database be incrementally updated to a new state via a specified passed-in Message.  <a href="#ad05ba8226d0996574056d5028c3973f9">More...</a><br /></td></tr>
<tr class="separator:ad05ba8226d0996574056d5028c3973f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627414e26cbf6869142f10f7f8f5e5bd"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a627414e26cbf6869142f10f7f8f5e5bd">MessageReceivedFromGateway</a> (const MessageRef &amp;msg, void *userData)</td></tr>
<tr class="memdesc:a627414e26cbf6869142f10f7f8f5e5bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implemented as a no-op, since by default this session doesn't have a gateway.  <a href="#a627414e26cbf6869142f10f7f8f5e5bd">More...</a><br /></td></tr>
<tr class="separator:a627414e26cbf6869142f10f7f8f5e5bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a976db73389513fb6bc05e0a86add08a6"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a976db73389513fb6bc05e0a86add08a6">ResetLocalDatabaseToDefault</a> (uint32 whichDatabase, uint32 &amp;dbChecksum)=0</td></tr>
<tr class="memdesc:a976db73389513fb6bc05e0a86add08a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Must be implemented to reset local state of the specified database to its well-known default state.  <a href="#a976db73389513fb6bc05e0a86add08a6">More...</a><br /></td></tr>
<tr class="separator:a976db73389513fb6bc05e0a86add08a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ca44672f16711b197fbd9963183b219"><td class="memItemLeft" align="right" valign="top">virtual ConstMessageRef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a9ca44672f16711b197fbd9963183b219">SeniorUpdateLocalDatabase</a> (uint32 whichDatabase, uint32 &amp;dbChecksum, const ConstMessageRef &amp;seniorDoMsg)=0</td></tr>
<tr class="memdesc:a9ca44672f16711b197fbd9963183b219"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will only be called on the senior peer.  <a href="#a9ca44672f16711b197fbd9963183b219">More...</a><br /></td></tr>
<tr class="separator:a9ca44672f16711b197fbd9963183b219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a394ccbcf5bd4049c92e4282b4800b9e6"><td class="memItemLeft" align="right" valign="top">virtual status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a394ccbcf5bd4049c92e4282b4800b9e6">JuniorUpdateLocalDatabase</a> (uint32 whichDatabase, uint32 &amp;dbChecksum, const ConstMessageRef &amp;juniorDoMsg)=0</td></tr>
<tr class="memdesc:a394ccbcf5bd4049c92e4282b4800b9e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will only be called on junior peers.  <a href="#a394ccbcf5bd4049c92e4282b4800b9e6">More...</a><br /></td></tr>
<tr class="separator:a394ccbcf5bd4049c92e4282b4800b9e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afad4a07ca1930723c43b700645ea60a0"><td class="memItemLeft" align="right" valign="top">virtual MessageRef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#afad4a07ca1930723c43b700645ea60a0">SaveLocalDatabaseToMessage</a> (uint32 whichDatabase) const =0</td></tr>
<tr class="memdesc:afad4a07ca1930723c43b700645ea60a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method should be implemented to save the state of the specified local database into a Message.  <a href="#afad4a07ca1930723c43b700645ea60a0">More...</a><br /></td></tr>
<tr class="separator:afad4a07ca1930723c43b700645ea60a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad130ea6dab4586509470f6af052173b5"><td class="memItemLeft" align="right" valign="top">virtual status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ad130ea6dab4586509470f6af052173b5">SetLocalDatabaseFromMessage</a> (uint32 whichDatabase, uint32 &amp;dbChecksum, const ConstMessageRef &amp;newDBStateMsg)=0</td></tr>
<tr class="memdesc:ad130ea6dab4586509470f6af052173b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method should be implemented to replace the current state of the specified local database with the new state represented by the passed-in Message.  <a href="#ad130ea6dab4586509470f6af052173b5">More...</a><br /></td></tr>
<tr class="separator:ad130ea6dab4586509470f6af052173b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aee136574182c30910742c973bdb0a5"><td class="memItemLeft" align="right" valign="top">virtual uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a0aee136574182c30910742c973bdb0a5">CalculateLocalDatabaseChecksum</a> (uint32 whichDatabase) const =0</td></tr>
<tr class="memdesc:a0aee136574182c30910742c973bdb0a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is used for sanity-checking.  <a href="#a0aee136574182c30910742c973bdb0a5">More...</a><br /></td></tr>
<tr class="separator:a0aee136574182c30910742c973bdb0a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9e4b180556e599ca316357610594461"><td class="memItemLeft" align="right" valign="top">virtual String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ad9e4b180556e599ca316357610594461">GetLocalDatabaseContentsAsString</a> (uint32 whichDatabase) const </td></tr>
<tr class="memdesc:ad9e4b180556e599ca316357610594461"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method may be implemented to return a human-readable representation of the specified database's current contents as a String.  <a href="#ad9e4b180556e599ca316357610594461">More...</a><br /></td></tr>
<tr class="separator:ad9e4b180556e599ca316357610594461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7348d1973ec7bd746cd03b28ee2696a0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a7348d1973ec7bd746cd03b28ee2696a0">PeerHasComeOnline</a> (const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;peerID, const ConstMessageRef &amp;peerInfo)</td></tr>
<tr class="memdesc:a7348d1973ec7bd746cd03b28ee2696a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a new peer has joined our group.  <a href="#a7348d1973ec7bd746cd03b28ee2696a0">More...</a><br /></td></tr>
<tr class="separator:a7348d1973ec7bd746cd03b28ee2696a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2223b65f0dab7a1916ebb69d52a007e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#af2223b65f0dab7a1916ebb69d52a007e">PeerHasGoneOffline</a> (const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;peerID, const ConstMessageRef &amp;peerInfo)</td></tr>
<tr class="memdesc:af2223b65f0dab7a1916ebb69d52a007e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a peer has left our group.  <a href="#af2223b65f0dab7a1916ebb69d52a007e">More...</a><br /></td></tr>
<tr class="separator:af2223b65f0dab7a1916ebb69d52a007e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6d92f51f1e0fceb9ef51f62b3197dd"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a8a6d92f51f1e0fceb9ef51f62b3197dd">SeniorPeerChanged</a> (const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;oldSeniorPeerID, const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;newSeniorPeerID)</td></tr>
<tr class="memdesc:a8a6d92f51f1e0fceb9ef51f62b3197dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the senior peer of our peer group has changed.  <a href="#a8a6d92f51f1e0fceb9ef51f62b3197dd">More...</a><br /></td></tr>
<tr class="separator:a8a6d92f51f1e0fceb9ef51f62b3197dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19110517ff19c25916622744200095a9"><td class="memItemLeft" align="right" valign="top">status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a19110517ff19c25916622744200095a9">SendMulticastUserMessageToAllPeers</a> (const MessageRef &amp;msg)</td></tr>
<tr class="memdesc:a19110517ff19c25916622744200095a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to send the given Message to all peers (except this one) via UDP multicast.  <a href="#a19110517ff19c25916622744200095a9">More...</a><br /></td></tr>
<tr class="separator:a19110517ff19c25916622744200095a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab181d44af85c35e46f3aef90b7e68117"><td class="memItemLeft" align="right" valign="top">status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ab181d44af85c35e46f3aef90b7e68117">SendUnicastUserMessageToAllPeers</a> (const MessageRef &amp;msg)</td></tr>
<tr class="memdesc:ab181d44af85c35e46f3aef90b7e68117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to send the given Message to all peers (except this one) via multiple instances of TCP unicast.  <a href="#ab181d44af85c35e46f3aef90b7e68117">More...</a><br /></td></tr>
<tr class="separator:ab181d44af85c35e46f3aef90b7e68117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a103965e952f4e85264c28fe4a5d31668"><td class="memItemLeft" align="right" valign="top">status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a103965e952f4e85264c28fe4a5d31668">SendUnicastUserMessageToPeer</a> (const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;destinationPeerID, const MessageRef &amp;msg)</td></tr>
<tr class="memdesc:a103965e952f4e85264c28fe4a5d31668"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to send the given Message to a specific peers via TCP unicast.  <a href="#a103965e952f4e85264c28fe4a5d31668">More...</a><br /></td></tr>
<tr class="separator:a103965e952f4e85264c28fe4a5d31668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a611eb5fbda7b4d2e568c9cdd94b105"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#a3a611eb5fbda7b4d2e568c9cdd94b105">PrintDatabaseStateInfo</a> (int32 whichDatabase=-1) const </td></tr>
<tr class="memdesc:a3a611eb5fbda7b4d2e568c9cdd94b105"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints various database-state information to stdout.  <a href="#a3a611eb5fbda7b4d2e568c9cdd94b105">More...</a><br /></td></tr>
<tr class="separator:a3a611eb5fbda7b4d2e568c9cdd94b105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c90206a17f06ed97374849337e920f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ZGPeerSession.html#ad4c90206a17f06ed97374849337e920f">PrintDatabaseUpdateLog</a> (int32 whichDatabase=-1) const </td></tr>
<tr class="memdesc:ad4c90206a17f06ed97374849337e920f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the database update-log(s) to stdout.  <a href="#ad4c90206a17f06ed97374849337e920f">More...</a><br /></td></tr>
<tr class="separator:ad4c90206a17f06ed97374849337e920f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a537227cb498575c2635699e4526231"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzg_1_1ITextCommandReceiver.html#a6a537227cb498575c2635699e4526231">ParseGenericTextCommand</a> (const String &amp;cmd)</td></tr>
<tr class="memdesc:a6a537227cb498575c2635699e4526231"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to handle any text commands that can be handled generically; that is, any commands that can be handled without knowing anything about this particular application.  <a href="#a6a537227cb498575c2635699e4526231">More...</a><br /></td></tr>
<tr class="separator:a6a537227cb498575c2635699e4526231"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the class that a user program would typically subclass from and add to a ReflectServer in order to participate in a ZG system. </p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00028">28</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a68af5b56013ccac02ac9a9e97d4cae95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classzg_1_1ZGPeerSession.html">ZGPeerSession</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classzg_1_1ZGPeerSettings.html">ZGPeerSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>peerSettings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">peerSettings</td><td>the <a class="el" href="classzg_1_1ZGPeerSettings.html" title="This immutable class holds various read-only settings that will be used to define the peer&#39;s behavior...">ZGPeerSettings</a> that this system is to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a03a3d3aa94ede5f54ba5c68ca0397f2a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void AboutToDetachFromServer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called just before this session object is detached from the ReflectServer object. </p>

</div>
</div>
<a class="anchor" id="acd034f5c7d067f473fe2f8df182e4f91"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual status_t AttachedToServer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when this session object is attached to the ReflectServer object. </p>
<dl class="section return"><dt>Returns</dt><dd>true iff the attaching process went okay, or false if there was an error and the attachment should be aborted. </dd></dl>

<p>Reimplemented in <a class="el" href="classzg_1_1ZGDatabasePeerSession.html#acd034f5c7d067f473fe2f8df182e4f91">ZGDatabasePeerSession</a>.</p>

</div>
</div>
<a class="anchor" id="a0aee136574182c30910742c973bdb0a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual uint32 CalculateLocalDatabaseChecksum </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>whichDatabase</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is used for sanity-checking. </p>
<p>It should be implemented to scan the specified local database and return a checksum representing all of the data in the database. This checksum should match the checksums returned/updated by the <a class="el" href="classzg_1_1ZGPeerSession.html#a9ca44672f16711b197fbd9963183b219" title="This method will only be called on the senior peer. ">SeniorUpdateLocalDatabase()</a> and <a class="el" href="classzg_1_1ZGPeerSession.html#a394ccbcf5bd4049c92e4282b4800b9e6" title="This method will only be called on junior peers. ">JuniorUpdateLocalDatabase()</a> functions for the same database state. </p>

<p>Implemented in <a class="el" href="classzg_1_1ZGDatabasePeerSession.html#af7a4f402fe616534411736d73a456be1">ZGDatabasePeerSession</a>.</p>

</div>
</div>
<a class="anchor" id="a2c6727307a52f5b06d67b4a644fd570b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ComputerIsAboutToSleep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called just before this computer goes to sleep (e.g. </p>
<p>due to closing a laptop lid) </p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00083">83</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

</div>
</div>
<a class="anchor" id="aca77828cd3f199719a9763cfcc8df356"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ComputerJustWokeUp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called just after this computer woke up from sleep (e.g. </p>
<p>due to opening a laptop lid) </p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00086">86</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

</div>
</div>
<a class="anchor" id="a70cf9ddd7b1758561710af7c7ebc3411"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void EndSession </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call this to request the termination of this session and its detachment from the ReflectServer. </p>
<p>Overridden to do some thread-shutdown work to avoid race conditions. </p>

</div>
</div>
<a class="anchor" id="ab19b7f43ff70e253eae40aec3d72ed82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64 GetEstimatedLatencyToPeer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;&#160;</td>
          <td class="paramname"><em>peerID</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets our current estimate of the one-way network latency between us and the specified peer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">peerID</td><td>The peer ID to get the latency of </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The estimated latency, in microseconds, or MUSCLE_TIME_NEVER if the latency is unknown. </dd></dl>

</div>
</div>
<a class="anchor" id="ad9e4b180556e599ca316357610594461"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual String GetLocalDatabaseContentsAsString </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>whichDatabase</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method may be implemented to return a human-readable representation of the specified database's current contents as a String. </p>
<p>This string will be printed to stdout after a checksum error has occurred, to make it easier to debug the update logic (i.e. by comparing the database state before and after the checksum-mismatched database was replaced, to see what is different). The default implementation of this method just returns "(GetLocalDatabaseContentsAsString unimplemented)". </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>The index of the database to return a string for. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classzg_1_1ZGDatabasePeerSession.html#ad9e4b180556e599ca316357610594461">ZGDatabasePeerSession</a>.</p>

</div>
</div>
<a class="anchor" id="a324b106fa339ebe6bc79f3323bd4a02e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a>&amp; GetLocalPeerID </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="classzg_1_1ZGPeerID.html" title="A ZGPeerID is a 128-bit integer that uniquely represents a particular peer in a ZG system...">ZGPeerID</a> being used by this local peer. </p>
<p>Returned value is not valid until after <a class="el" href="classzg_1_1ZGPeerSession.html#acd034f5c7d067f473fe2f8df182e4f91" title="Called when this session object is attached to the ReflectServer object. ">ZGPeerSession::AttachedToServer()</a> returns B_NO_ERROR. </p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00095">95</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7b2928662fb1e137125cfe2bce596811"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual uint64 GetNetworkTime64 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the current time according to the network-time-clock, in microseconds. </p>
<p>The intent of this clock is to be the same on all peers in the system. However, this means that it may occasionally change (break monotonicity) in order to synchronize with the other peers in the system. Note that this function will return 0 if we aren't currently fully attached to the system, since before then we don't know the network time. </p>

<p>Implements <a class="el" href="classzg_1_1INetworkTimeProvider.html#a9527f2e5b67c6e2c3f0b00dbdc8c360e">INetworkTimeProvider</a>.</p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00105">105</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

<p>References <a class="el" href="ZGPeerSession_8h_source.html#l00115">ZGPeerSession::GetNetworkTime64ForRunTime64()</a>.</p>

</div>
</div>
<a class="anchor" id="a3e8115d83d03d665bb0bdb5291f53df6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual uint64 GetNetworkTime64ForRunTime64 </td>
          <td>(</td>
          <td class="paramtype">uint64&#160;</td>
          <td class="paramname"><em>runTime64TimeStamp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a local-time-clock-value (i.e. </p>
<p>one using the same time-base as returned by GetRunTime64()), returns the approximately equivalent network-time-value (i.e. one using the same time-base as returned by <a class="el" href="classzg_1_1ZGPeerSession.html#a7b2928662fb1e137125cfe2bce596811" title="Returns the current time according to the network-time-clock, in microseconds. ">GetNetworkTime64()</a>) </p>

<p>Implements <a class="el" href="classzg_1_1INetworkTimeProvider.html#a28747d9a53b572c9277a99a11b17ba21">INetworkTimeProvider</a>.</p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00115">115</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

<p>References <a class="el" href="classzg_1_1ZGPeerSession.html#ae895c38d03054e633a4d7556e15cc53a">ZGPeerSession::GetToNetworkTimeOffset()</a>.</p>

<p>Referenced by <a class="el" href="ZGPeerSession_8h_source.html#l00105">ZGPeerSession::GetNetworkTime64()</a>.</p>

</div>
</div>
<a class="anchor" id="ab73bdc55c3698194832c58b7c438eae2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const Hashtable&lt;<a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a>, ConstMessageRef&gt;&amp; GetOnlinePeers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a reference to a read-only table of the peers that are currently online in the system. </p>
<p>The keys in the table are the peer's IDs, and the values are the peers' attributes (may be NULL if they didn't advertise any) The ordering of the entries in the table is not significant (in particular, it doesn't reflect the ordering of the peers' seniority, at least not for now). </p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00126">126</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

</div>
</div>
<a class="anchor" id="a00f46531d864b83befde9c9237b4628d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classzg_1_1ZGPeerSettings.html">ZGPeerSettings</a>&amp; GetPeerSettings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="classzg_1_1ZGPeerSettings.html" title="This immutable class holds various read-only settings that will be used to define the peer&#39;s behavior...">ZGPeerSettings</a> object, as passed to our constructor. </p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00073">73</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

</div>
</div>
<a class="anchor" id="afb739573da69c2b540c9a921d732a149"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual uint64 GetPulseTime </td>
          <td>(</td>
          <td class="paramtype">const PulseArgs &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the time (in microseconds, using the timebase of GetRunTime64()) when <a class="el" href="classzg_1_1ZGPeerSession.html#ac530185533f417b7c6c86032c82b6a0d" title="Called at (approximately) the time specified by GetPulseTime(). ">Pulse()</a> should next be called. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>Context information for this call (including the current time and the time at which <a class="el" href="classzg_1_1ZGPeerSession.html#ac530185533f417b7c6c86032c82b6a0d" title="Called at (approximately) the time specified by GetPulseTime(). ">Pulse()</a> was supposed to be called at) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new time in microseconds, or MUSCLE_TIME_NEVER if we don't need <a class="el" href="classzg_1_1ZGPeerSession.html#ac530185533f417b7c6c86032c82b6a0d" title="Called at (approximately) the time specified by GetPulseTime(). ">Pulse()</a> to be called. </dd></dl>

<p>Reimplemented in <a class="el" href="classchoir_1_1ChoirSession.html#afb739573da69c2b540c9a921d732a149">ChoirSession</a>.</p>

</div>
</div>
<a class="anchor" id="a4eebb6c3eabb3eb64776560cbbf9c17c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual uint64 GetRunTime64ForNetworkTime64 </td>
          <td>(</td>
          <td class="paramtype">uint64&#160;</td>
          <td class="paramname"><em>networkTime64TimeStamp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a network-time-clock-value (i.e. </p>
<p>one using the same time-base as returned by <a class="el" href="classzg_1_1ZGPeerSession.html#a7b2928662fb1e137125cfe2bce596811" title="Returns the current time according to the network-time-clock, in microseconds. ">GetNetworkTime64()</a>), returns the approximately-equivalent local-time-clock-value (i.e. one using the same time-base as returned by GetRunTime64()) </p>

<p>Implements <a class="el" href="classzg_1_1INetworkTimeProvider.html#a711b9b5bee611f64d7ba4c4c8e41b888">INetworkTimeProvider</a>.</p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00110">110</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

<p>References <a class="el" href="classzg_1_1ZGPeerSession.html#ae895c38d03054e633a4d7556e15cc53a">ZGPeerSession::GetToNetworkTimeOffset()</a>.</p>

</div>
</div>
<a class="anchor" id="ab298b1b3f66749ab5b4b961e18e1214a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a>&amp; GetSeniorPeerID </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="classzg_1_1ZGPeerID.html" title="A ZGPeerID is a 128-bit integer that uniquely represents a particular peer in a ZG system...">ZGPeerID</a> of the senior peer of this system, or an invalid <a class="el" href="classzg_1_1ZGPeerID.html" title="A ZGPeerID is a 128-bit integer that uniquely represents a particular peer in a ZG system...">ZGPeerID</a> if there currently is no senior peer (that we know of). </p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00098">98</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae895c38d03054e633a4d7556e15cc53a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int64 GetToNetworkTimeOffset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the number of microseconds that should be added to a GetRunTime64() value to turn it into a <a class="el" href="classzg_1_1ZGPeerSession.html#a7b2928662fb1e137125cfe2bce596811" title="Returns the current time according to the network-time-clock, in microseconds. ">GetNetworkTime64()</a> value, or subtracted to do the inverse operation. </p>
<p>Note that this value will vary from one moment to the next! </p>

<p>Implements <a class="el" href="classzg_1_1INetworkTimeProvider.html#af897f9cfeee9eae1a05b0886c06eb19b">INetworkTimeProvider</a>.</p>

<p>Referenced by <a class="el" href="ZGPeerSession_8h_source.html#l00115">ZGPeerSession::GetNetworkTime64ForRunTime64()</a>, and <a class="el" href="ZGPeerSession_8h_source.html#l00110">ZGPeerSession::GetRunTime64ForNetworkTime64()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2ded747bc909df4745d470f24893ab7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool IAmFullyAttached </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true iff this peer is fully attached to the system (i.e. </p>
<p>has completed enumeration of which other peers are online, etc) </p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00089">89</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

</div>
</div>
<a class="anchor" id="a24588d280336a3e8193b3316791f38dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IAmTheSeniorPeer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true iff this peer is currently considered to be the senior peer of the system. </p>

</div>
</div>
<a class="anchor" id="aa62ec85a1c44164be49d34f312fc0d2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IsPeerOnline </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;&#160;</td>
          <td class="paramname"><em>peerID</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true iff if the specified peer is currently online. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">peerID</td><td>The peer ID to check on. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af091c3cd023f62173ddd143e81abe17d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool IsReadyForTextCommands </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default implementation returns true iff we are currently fully attached to the ZG system. </p>

<p>Implements <a class="el" href="classzg_1_1ITextCommandReceiver.html#aa6ccc537dceec88054a3509465bfdc5d">ITextCommandReceiver</a>.</p>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00061">61</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

</div>
</div>
<a class="anchor" id="a394ccbcf5bd4049c92e4282b4800b9e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual status_t JuniorUpdateLocalDatabase </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>whichDatabase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 &amp;&#160;</td>
          <td class="paramname"><em>dbChecksum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ConstMessageRef &amp;&#160;</td>
          <td class="paramname"><em>juniorDoMsg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will only be called on junior peers. </p>
<p>It must be implemented to update the junior peer's local database according to the instructions contained in (juniorDoMsg). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>The index of the database to update (e.g. 0 for the first database, 1 for the second, and so on) </td></tr>
    <tr><td class="paramname">dbChecksum</td><td>Passed in as the database's current checksum value. On return, this should be set to the database's new (post-update) checksum value. </td></tr>
    <tr><td class="paramname">juniorDoMsg</td><td>Reference to a Message instructing the junior peer how his lcoal database should be updated. (The contents and semantics of this Message will be determined by logic in the subclass of this class; they are not specified by the <a class="el" href="classzg_1_1ZGPeerSession.html" title="This is the class that a user program would typically subclass from and add to a ReflectServer in ord...">ZGPeerSession</a> class itself) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>on success, returns B_NO_ERROR. On failure (or refusal-to-update), returns B_ERROR. </dd></dl>

<p>Implemented in <a class="el" href="classzg_1_1ZGDatabasePeerSession.html#a848fa31d651660fc04bff40075e0c14b">ZGDatabasePeerSession</a>.</p>

</div>
</div>
<a class="anchor" id="a259963b0914bd8676f2045471685cd0d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void LocalSeniorPeerStatusChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called whenever this peer has gained or lost senior-peer status (current status is indicated by the return value of <a class="el" href="classzg_1_1ZGPeerSession.html#a24588d280336a3e8193b3316791f38dc" title="Returns true iff this peer is currently considered to be the senior peer of the system. ">IAmTheSeniorPeer()</a>) </p>

</div>
</div>
<a class="anchor" id="a627414e26cbf6869142f10f7f8f5e5bd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void MessageReceivedFromGateway </td>
          <td>(</td>
          <td class="paramtype">const MessageRef &amp;&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented as a no-op, since by default this session doesn't have a gateway. </p>

</div>
</div>
<a class="anchor" id="a1f3f7e5a94030c65a6fd3d9be700f898"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void NetworkInterfacesChanged </td>
          <td>(</td>
          <td class="paramtype">const Hashtable&lt; String, Void &gt; &amp;&#160;</td>
          <td class="paramname"><em>optInterfaceNames</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the set of available network interfaces on this computer has changed. </p>
<p>Default implementation is a no-op. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optInterfaceNames</td><td>An optional list of network-interface names (e.g. "eth0", "eth1") that are known to have changed. If empty, then you should assume that any or all network interfaces have changed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ZGPeerSession_8h_source.html#l00080">80</a> of file <a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6a537227cb498575c2635699e4526231"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ParseGenericTextCommand </td>
          <td>(</td>
          <td class="paramtype">const String &amp;&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to handle any text commands that can be handled generically; that is, any commands that can be handled without knowing anything about this particular application. </p>
<p>This logic is broken out into a separate function so that it can be called by the stdin-text handlers of various daemons. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>the command text to parse </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the command was handled, false if it wasn't. </dd></dl>

</div>
</div>
<a class="anchor" id="a7348d1973ec7bd746cd03b28ee2696a0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void PeerHasComeOnline </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;&#160;</td>
          <td class="paramname"><em>peerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ConstMessageRef &amp;&#160;</td>
          <td class="paramname"><em>peerInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when a new peer has joined our group. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">peerID</td><td>The unique ID of the peer who is now online. (Note that this ID may be our own ID!) </td></tr>
    <tr><td class="paramname">peerInfo</td><td>An optional Message containing some additional information about that peer, if that peer specified any additional information in his <a class="el" href="classzg_1_1ZGPeerSettings.html" title="This immutable class holds various read-only settings that will be used to define the peer&#39;s behavior...">ZGPeerSettings</a> object. May be a NULL reference otherwise. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classchoir_1_1ChoirSession.html#a7348d1973ec7bd746cd03b28ee2696a0">ChoirSession</a>.</p>

</div>
</div>
<a class="anchor" id="af2223b65f0dab7a1916ebb69d52a007e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void PeerHasGoneOffline </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;&#160;</td>
          <td class="paramname"><em>peerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ConstMessageRef &amp;&#160;</td>
          <td class="paramname"><em>peerInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when a peer has left our group. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">peerID</td><td>The unique ID of the peer who is now offline. </td></tr>
    <tr><td class="paramname">peerInfo</td><td>An optional Message containing some additional information about that peer, if that peer specified any additional information in his <a class="el" href="classzg_1_1ZGPeerSettings.html" title="This immutable class holds various read-only settings that will be used to define the peer&#39;s behavior...">ZGPeerSettings</a> object. May be a NULL reference otherwise. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classchoir_1_1ChoirSession.html#af2223b65f0dab7a1916ebb69d52a007e">ChoirSession</a>.</p>

</div>
</div>
<a class="anchor" id="a3a611eb5fbda7b4d2e568c9cdd94b105"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PrintDatabaseStateInfo </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>whichDatabase</em> = <code>-1</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prints various database-state information to stdout. </p>
<p>Useful for debugging purposes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>Index of the database to print out state for, or leave set to -1 to print out info about all databases. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad4c90206a17f06ed97374849337e920f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PrintDatabaseUpdateLog </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>whichDatabase</em> = <code>-1</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prints the database update-log(s) to stdout. </p>
<p>Useful for debugging purposes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>Index of the database to print out the update-log for, or leave set to -1 to print out the update-logs of all databases. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac530185533f417b7c6c86032c82b6a0d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Pulse </td>
          <td>(</td>
          <td class="paramtype">const PulseArgs &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called at (approximately) the time specified by <a class="el" href="classzg_1_1ZGPeerSession.html#afb739573da69c2b540c9a921d732a149" title="Returns the time (in microseconds, using the timebase of GetRunTime64()) when Pulse() should next be ...">GetPulseTime()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>Context information for this call (including the current time and the time at which this method was supposed to be called at) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classchoir_1_1ChoirSession.html#ac530185533f417b7c6c86032c82b6a0d">ChoirSession</a>.</p>

</div>
</div>
<a class="anchor" id="ae2b52502bde42f465521343a52db6eb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">status_t RequestReplaceDatabaseState </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>whichDatabase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MessageRef &amp;&#160;</td>
          <td class="paramname"><em>newDatabaseStateMsg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call this if you want to request that the specified database be completely replaced with a new state that is specified by the passed-in Message. </p>
<p>The new database state will be created by calling SetLocalDatabaseFromMessage(newDatabaseStateMsg) on the senior peer. Note that this method only sends the request; the actual database-replace will happen (if it happens) some time after this method returns. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>the index of the database whose state should be replaced. </td></tr>
    <tr><td class="paramname">newDatabaseStateMsg</td><td>a Message containing instructions/data that <a class="el" href="classzg_1_1ZGPeerSession.html#ad130ea6dab4586509470f6af052173b5" title="This method should be implemented to replace the current state of the specified local database with t...">SetLocalDatabaseFromMessage()</a> can use later on to create a new database state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>B_NO_ERROR if the the replace-request was successfully sent to the senior peer, or B_ERROR if the request could not be sent. </dd></dl>

</div>
</div>
<a class="anchor" id="a9b5d5614eb3a7655c48bb62e52f76cf0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">status_t RequestResetDatabaseStateToDefault </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>whichDatabase</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call this if you want to request that the specified database be reset back to its well-known default state. </p>
<p>The well-known default state is defined by the implementation of the subclass's <a class="el" href="classzg_1_1ZGPeerSession.html#a976db73389513fb6bc05e0a86add08a6" title="Must be implemented to reset local state of the specified database to its well-known default state...">ResetLocalDatabaseToDefault()</a> method. Note that this method only sends the request; the actual reset will happen (if it happens) some time after this method returns. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>the index of the database that should be reset </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>B_NO_ERROR if the the reset-request was successfully sent to the senior peer, or B_ERROR if the request could not be sent. </dd></dl>

</div>
</div>
<a class="anchor" id="ad05ba8226d0996574056d5028c3973f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">status_t RequestUpdateDatabaseState </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>whichDatabase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MessageRef &amp;&#160;</td>
          <td class="paramname"><em>databaseUpdateMsg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call this if you want to request that the specified database be incrementally updated to a new state via a specified passed-in Message. </p>
<p>The new database state will be created by calling SeniorUpdateLocalDatabase(databaseUpdateMsg) on the senior peer, and then the Message returned by that method call will be used to update the local database of all of the other peers. Note that this method only sends the request; the actual database-update will happen (if it happens) some time after this method returns. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>the index of the database whose state should be updated. </td></tr>
    <tr><td class="paramname">databaseUpdateMsg</td><td>a Message containing instructions/data that <a class="el" href="classzg_1_1ZGPeerSession.html#a9ca44672f16711b197fbd9963183b219" title="This method will only be called on the senior peer. ">SeniorUpdateLocalDatabase()</a> can use later on to transition the database to a new database state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>B_NO_ERROR if the the update-request was successfully sent to the senior peer, or B_ERROR if the request could not be sent. </dd></dl>

</div>
</div>
<a class="anchor" id="a976db73389513fb6bc05e0a86add08a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ResetLocalDatabaseToDefault </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>whichDatabase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 &amp;&#160;</td>
          <td class="paramname"><em>dbChecksum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Must be implemented to reset local state of the specified database to its well-known default state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>The index of the database to reset (e.g. 0 for the first database, 1 for the second, and so on) </td></tr>
    <tr><td class="paramname">dbChecksum</td><td>Passed in as the database's current checksum value. On return, this should be set to the database's new checksum value. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classzg_1_1ZGDatabasePeerSession.html#a8987a83cf734975d65a3e9e3d0422baf">ZGDatabasePeerSession</a>.</p>

</div>
</div>
<a class="anchor" id="afad4a07ca1930723c43b700645ea60a0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual MessageRef SaveLocalDatabaseToMessage </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>whichDatabase</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method should be implemented to save the state of the specified local database into a Message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>The index of the database to save (e.g. 0 for the first database, 1 for the second, and so on) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a MessageRef containing the full current state of the local database, or a NULL MessageRef on failure. </dd></dl>

<p>Implemented in <a class="el" href="classzg_1_1ZGDatabasePeerSession.html#addc2631c00921968fd84d7429e84235b">ZGDatabasePeerSession</a>.</p>

</div>
</div>
<a class="anchor" id="a19110517ff19c25916622744200095a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">status_t SendMulticastUserMessageToAllPeers </td>
          <td>(</td>
          <td class="paramtype">const MessageRef &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to send the given Message to all peers (except this one) via UDP multicast. </p>
<p>The PacketTunnelIOGateway mechanism is used so that large Messages can be transmitted as well as small ones. Delivery is not guaranteed, however. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The Message object to send. MessageReceivedFromPeer() will be called on each peer when the Message arrives there. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>B_NO_ERROR if the Message was successfully enqueued to be multicasted out, of B_ERROR otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ab181d44af85c35e46f3aef90b7e68117"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">status_t SendUnicastUserMessageToAllPeers </td>
          <td>(</td>
          <td class="paramtype">const MessageRef &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to send the given Message to all peers (except this one) via multiple instances of TCP unicast. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The Message object to send. MessageReceivedFromPeer() will be called on each peer when the Message arrives there. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>B_NO_ERROR if the Message was successfully enqueued to be multicasted out, of B_ERROR otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a103965e952f4e85264c28fe4a5d31668"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">status_t SendUnicastUserMessageToPeer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;&#160;</td>
          <td class="paramname"><em>destinationPeerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MessageRef &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to send the given Message to a specific peers via TCP unicast. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">destinationPeerID</td><td>The <a class="el" href="classzg_1_1ZGPeerID.html" title="A ZGPeerID is a 128-bit integer that uniquely represents a particular peer in a ZG system...">ZGPeerID</a> of the peer we want this Message to be sent to. </td></tr>
    <tr><td class="paramname">msg</td><td>The Message object to send. MessageReceivedFromPeer() will be called on the peer when the Message arrives there. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>B_NO_ERROR if the Message was successfully enqueued to be unicasted out, of B_ERROR otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a8a6d92f51f1e0fceb9ef51f62b3197dd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void SeniorPeerChanged </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;&#160;</td>
          <td class="paramname"><em>oldSeniorPeerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classzg_1_1ZGPeerID.html">ZGPeerID</a> &amp;&#160;</td>
          <td class="paramname"><em>newSeniorPeerID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the senior peer of our peer group has changed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldSeniorPeerID</td><td>The unique ID of the peer who was the senior peer but no longer is. (May be a zero/invalid if there wasn't any senior peer before) </td></tr>
    <tr><td class="paramname">newSeniorPeerID</td><td>The unique ID of the peer who is now the senior peer. (May be a zero/invalid if there is no senior peer anymore) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classchoir_1_1ChoirSession.html#a8a6d92f51f1e0fceb9ef51f62b3197dd">ChoirSession</a>.</p>

</div>
</div>
<a class="anchor" id="a9ca44672f16711b197fbd9963183b219"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ConstMessageRef SeniorUpdateLocalDatabase </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>whichDatabase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 &amp;&#160;</td>
          <td class="paramname"><em>dbChecksum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ConstMessageRef &amp;&#160;</td>
          <td class="paramname"><em>seniorDoMsg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will only be called on the senior peer. </p>
<p>It must be implemented to update the senior peer's local database and return a MessageRef that the system can later use to update same database on the various junior peers in the same way later on. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>The index of the database to update (e.g. 0 for the first database, 1 for the second, and so on) </td></tr>
    <tr><td class="paramname">dbChecksum</td><td>Passed in as the database's current checksum value. On return, this should be set to the database's new (post-update) checksum value. </td></tr>
    <tr><td class="paramname">seniorDoMsg</td><td>Reference to a Message instructing the senior peer how his local database should be updated. (The contents and semantics of this Message will be determined by logic in the subclass of this class; they are not specified by the <a class="el" href="classzg_1_1ZGPeerSession.html" title="This is the class that a user program would typically subclass from and add to a ReflectServer in ord...">ZGPeerSession</a> class itself) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>on success, this method should return a MessageRef that can be sent on to the junior peers to tell them how to update their local database so that their local database ends up in the same post-change state that our local database is currently in. Returning (seniorDoMsg) is acceptable if that is a Message that will cause the junior peers to do the right thing. On failure (or refusal-to-handle-the-update), a NULL MessageRef() should be returned. </dd></dl>

<p>Implemented in <a class="el" href="classzg_1_1ZGDatabasePeerSession.html#a65142da6c5b3ddc64fb5d0e0fc001328">ZGDatabasePeerSession</a>.</p>

</div>
</div>
<a class="anchor" id="ad130ea6dab4586509470f6af052173b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual status_t SetLocalDatabaseFromMessage </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>whichDatabase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 &amp;&#160;</td>
          <td class="paramname"><em>dbChecksum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ConstMessageRef &amp;&#160;</td>
          <td class="paramname"><em>newDBStateMsg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method should be implemented to replace the current state of the specified local database with the new state represented by the passed-in Message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichDatabase</td><td>The index of the database to replace (e.g. 0 for the first database, 1 for the second, and so on) </td></tr>
    <tr><td class="paramname">dbChecksum</td><td>Passed in as the database's current checksum value. On return, this should be set to the database's new (post-update) checksum value. </td></tr>
    <tr><td class="paramname">newDBStateMsg</td><td>A Message holding the contents of the new database we want to replace the current database with. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>B_NO_ERROR on success, or B_ERROR on failure. </dd></dl>

<p>Implemented in <a class="el" href="classzg_1_1ZGDatabasePeerSession.html#af15f8f61b59e5ec0524ad8608c38a3c6">ZGDatabasePeerSession</a>.</p>

</div>
</div>
<a class="anchor" id="a607f895c8d8c8a4d7a9fa04407e7d9b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool TextCommandReceived </td>
          <td>(</td>
          <td class="paramtype">const String &amp;&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default implementation handles some standard ZG commands such as "print peers" or "print sessions". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">text</td><td>A text string was received via our stdin stream. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the command was recognized and handled, or false otherwise. </dd></dl>

<p>Implements <a class="el" href="classzg_1_1ITextCommandReceiver.html#a9e8b410ccb9597071114ebc0424487ff">ITextCommandReceiver</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ZGPeerSession_8h_source.html">ZGPeerSession.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 23 2017 20:32:21 for ZG by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
